<p id="topic-content"><h1 id="jd0e2">Support for IPv6 Networks in Contrail</h1><sw-topic-details date="2016-12-12"> </sw-topic-details><div id="intro"><div class="mini-toc-intro"><p>Starting with Contrail Release 2.0, support
for IPv6 overlay networks is provided.</p></div></div><h2 id="jd0e15">Overview: IPv6 Networks in Contrail</h2><p>The following features are supported for IPv6 networks and overlay.
The underlay network must be IPv4.</p><ul><li style=""><p>Virtual machines with IPv6 and IPv4 interfaces</p></li><li style=""><p>Virtual machines with IPv6-only interfaces</p></li><li style=""><p>DHCPv6 and neighbor discovery</p></li><li style=""><p>Policy and Security groups</p></li><li style=""><p>IPv6 flow set up, tear down, and aging</p></li><li style=""><p>Flow set up and tear down based on TCP state machine</p></li><li style=""><p>Protocol-based flow aging</p></li><li style=""><p>Fat flow</p></li><li style=""><p>Allowed address pair configuration with IPv6 addresses</p></li><li style=""><p>IPv6 service chaining</p></li><li style=""><p>Equal Cost Multi-Path (ECMP)</p></li><li style=""><p>Connectivity with gateway (MX Series device)</p></li><li style=""><p>Virtual Domain Name Services (vDNS), name-to-IPv6 address
resolution</p></li><li style=""><p>User-Visible Entities (UVEs)</p></li></ul><p><em>NOT</em> present is support for the following:</p><ul><li style=""><p>Source Network Address Translation (SNAT)</p></li><li style=""><p>Load Balancing as a Service (LBaaS)</p></li><li style=""><p>IPv6 fragmentation</p></li><li style=""><p>Floating IP</p></li><li style=""><p>Link-local and metadata services</p></li><li style=""><p>Diagnostics for IPv6</p></li><li style=""><p>Contrail Device Manager</p></li><li style=""><p>Virtual customer premises equipment (vCPE)</p></li></ul><h2 id="jd0e94">Creating IPv6 Virtual Networks in Contrail </h2><p>You can create an IPv6 virtual network from the Contrail user
interface in the same way you create an IPv4 virtual network. When
you create a new virtual network by selecting <strong v-pre="">Configure &gt; Networking
&gt; Networks</strong>, the Edit fields accept IPv6 addresses, as shown
in the following image.</p><figure id="jd0e102"><div class="graphic"><img alt="" src="documentation/images/s042015.gif" style=""/></div></figure><h3 id="jd0e104">Address Assignments</h3><p>When virtual machines are launched with an IPv6 virtual network
created in the Contrail user interface, the virtual machine interfaces
get assigned addresses from all the families configured in the virtual
network.</p><p>The following is a sample of IPv6 instances with address assignments,
as listed in the OpenStack Horizon user interface.</p><figure id="jd0e111"><div class="graphic"><img alt="" src="documentation/images/s042016.gif" style=""/></div></figure><h4 id="jd0e113">Enabling DHCPv6 In Virtual Machines</h4><p>To allow IPv6 address assignment using DHCPv6, the virtual machine
network interface configuration must be updated appropriately.</p><p>For example, to enable DHCPv6 for Ubuntu-based virtual machines,
add the following line in the <code class="filepath">/etc/network/interfaces</code> file:</p><p><code class="inline" v-pre="">iface eht0 inet6 dhcp</code></p><p>Also, <code class="inline" v-pre="">dhclient -6</code> can be run from
within the virtual machine to get IPv6 addresses using DHCPv6.</p><h2 id="jd0e131">Adding IPv6 Peers</h2><p>The procedure to add an IPv6 BGP peer in Contrail is similar
to adding an IPv4 peer. Select <strong v-pre="">Configure &gt; Infrastructure &gt; BGP
Peers</strong>, include <code class="inline" v-pre="">inet6-vpn</code> in the Address
Family list to allow advertisement of IPv6 addresses.</p><p>A sample is shown in the following.</p><figure id="jd0e144"><div class="graphic"><img alt="" src="documentation/images/s042017.gif" style=""/></div></figure><sw-admonition name="note" style=""><strong class="title">Note</strong><p>Additional configuration is required on the peer router to allow
inet6-vpn peering.</p></sw-admonition><sw-prev-next> </sw-prev-next></p>