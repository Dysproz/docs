<p id="topic-content"><h1 id="jd0e2">Configuring Secure Sandesh and Introspect for Contrail Analytics</h1><sw-topic-details date="2020-08-18"> </sw-topic-details><h2 id="jd0e10">Configuring Secure Sandesh Connection</h2><p>All Contrail services use Sandesh, a southbound interface protocol
based on Apache Thrift, to send analytics data such as system logs,
object logs, UVEs, flow logs, and the like, to the collector service
in the Contrail Analytics node. The Transport Layer Security (TLS)
protocol is used for certificate exchange, mutual authentication,
and negotiating ciphers to secure the Sandesh connection from potential
tampering and eavesdropping. </p><p>To configure a secure Sandesh connection, configure the following
parameters in all Contrail services that connect to the collector
(Sandesh clients) and the Sandesh server.</p><sw-table><table cellspacing="0" style="border-top:thin solid black;" width="99%"><thead><tr valign="bottom"><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Parameter</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Description</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default</p></th></tr></thead><tbody><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_keyfile </code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's private key</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/private/server-privkey.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_certfile</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's public certificate</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/certs/server.pem</code></p></td></tr><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_ca_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the CA certificate </p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/certs/ca-cert.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_ssl_enable</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Enable or disable secure Sandesh connection </p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">false</code></p></td></tr></tbody></table></sw-table><h2 id="jd0e83">Configuring Secure Introspect Connection</h2><p>All Contrail services are embedded with a web server that can
be used to query the internal state of the data structures, view trace
messages, and perform other extensive debugging. The Transport Layer
Security (TLS) protocol is used for certificate exchange, mutual authentication,
and negotiating ciphers to secure the introspect connection from potential
tampering and eavesdropping.</p><p>To configure a secure introspect connection, configure the following
parameters in the Contrail service, see <a href="analytics-secure-sandesh-40-vnc.html#sandesh1">Table 1</a>.</p><sw-table><p class="SubTitle" id="sandesh1">Table 1: Secure Introspect Parameters</p><table cellspacing="0" style="border-top:thin solid black;" width="99%"><thead><tr valign="bottom"><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Parameter</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Description</p></th><th align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Default</p></th></tr></thead><tbody><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_keyfile</code>
</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's private key.</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/private/server-privkey.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_certfile</code>
</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the node's public certificate.</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/certs/server.pem</code></p></td></tr><tr valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].sandesh_ca_cert</code></p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Path to the CA certificate.</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">/etc/contrail/ssl/certs/ca-cert.pem</code></p></td></tr><tr class="row-with-bg" valign="top"><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="inline" v-pre="">[SANDESH].introspect_ssl_enable</code>
</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p>Enable or disable secure introspect connection.</p></td><td align="left" style="border-bottom:thin solid black;text-align: left;padding-right: 10px;padding-left: 10px;"><p><code class="filepath">false</code></p></td></tr></tbody></table></sw-table><sw-prev-next> </sw-prev-next></p>