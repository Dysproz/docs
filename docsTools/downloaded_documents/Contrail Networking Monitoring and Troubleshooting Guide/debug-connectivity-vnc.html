<p id="topic-content"><h1 id="jd0e2">Example: Debugging Connectivity Using Monitoring for Troubleshooting</h1><sw-topic-details date="2020-09-16"> </sw-topic-details><h2 id="id-using-monitoring-to-debug-connectivity">Using Monitoring to Debug Connectivity</h2><p>This example shows how you can use monitoring to debug connectivity
in your Contrail system. You can use the demo setup in Contrail to
use these steps on your own.</p><ol type="1"><li id="jd0e22" style="">Navigate to <strong v-pre="">Monitor -&gt; Networking -&gt; Networks -&gt;</strong> <code class="inline" v-pre="">default-domain:demo:vn0</code>, <strong v-pre="">Instance</strong> <code class="inline" v-pre="">ed6abd16-250e-4ec5-a382-5cbc458fb0ca </code>with <strong v-pre="">IP address</strong> <code class="inline" v-pre="">192.168.0.252</code> in the virtual network <code class="inline" v-pre="">vn0</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-1">Figure 1</a>.<figure id="ex-mon-netw-1"><figcaption>Figure 1: Navigate to Instance</figcaption><div class="graphic"><img alt="Navigate to Instance" src="images/s041879.gif" style=""/></div></figure></li><li id="jd0e52" style="">Click the instance to view <strong v-pre="">Traffic Statistics for
Instance</strong>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-2">Figure 2</a>.<figure id="ex-mon-netw-2"><figcaption>Figure 2: Traffic Statistics for Instance</figcaption><div class="graphic"><img alt="Traffic Statistics for Instance" src="images/s041880.gif" style=""/></div></figure></li><li id="jd0e64" style=""><strong v-pre="">Instance</strong> <code class="inline" v-pre="">d26c0b31-c795-400e-b8be-4d3e6de77dcf
 </code>with <strong v-pre="">IP address</strong> <code class="inline" v-pre="">192.168.0.253</code> in the virtual network <code class="inline" v-pre="">vn16</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-3">Figure 3</a> and <a href="debug-connectivity-vnc.html#ex-mon-netw-4">Figure 4</a>.<figure id="ex-mon-netw-3"><figcaption>Figure 3: Navigate to Instance</figcaption><div class="graphic"><img alt="Navigate to Instance" src="images/s041881.gif" style=""/></div></figure><figure id="ex-mon-netw-4"><figcaption>Figure 4: Traffic Statistics for Instance</figcaption><div class="graphic"><img alt="Traffic Statistics for Instance" src="images/s041882.gif" style=""/></div></figure></li><li id="jd0e93" style="">From <strong v-pre="">Monitor-&gt;Infrastructure-&gt;Virtual Routers-&gt;</strong><strong v-pre="">a3s18-&gt;Interfaces</strong>, we can see that <strong v-pre="">Instance</strong><code class="inline" v-pre=""> ed6abd16-250e-4ec5-a382-5cbc458fb0ca</code> is
hosted on <strong v-pre="">Virtual Router </strong><code class="inline" v-pre="">a3s18</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-5">Figure 5</a>.<figure id="ex-mon-netw-5"><figcaption>Figure 5: Navigate to a3s18 Interfaces</figcaption><div class="graphic"><img alt="Navigate to a3s18 Interfaces" src="images/s041883.gif" style=""/></div></figure></li><li id="jd0e117" style="">From <strong v-pre="">Monitor-&gt;Infrastructure-&gt;Virtual Routers-&gt;</strong><strong v-pre="">a3s19-&gt;Interfaces</strong>, we can see that <strong v-pre="">Instance </strong><code class="inline" v-pre="">d26c0b31-c795-400e-b8be-4d3e6de77dcf  </code> is hosted on <strong v-pre="">Virtual Router </strong><code class="inline" v-pre="">a3s19</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-6">Figure 6</a>.<figure id="ex-mon-netw-6"><figcaption>Figure 6: Navigate to a3s19 Interfaces</figcaption><div class="graphic"><img alt="Navigate to a3s19 Interfaces" src="images/s041884.gif" style=""/></div></figure></li><li id="jd0e141" style=""><strong v-pre="">Virtual Routers</strong> <code class="inline" v-pre="">a3s18</code> and <code class="inline" v-pre="">a3s19</code> have the <strong v-pre="">ACL</strong> entries
to allow connectivity between <code class="inline" v-pre="">default-domain:demo:vn0 </code>and <code class="inline" v-pre="">default-domain:demo:vn16</code> networks.
See <a href="debug-connectivity-vnc.html#ex-mon-netw-7">Figure 7</a> and <a href="debug-connectivity-vnc.html#ex-mon-netw-8">Figure 8</a>.<figure id="ex-mon-netw-7"><figcaption>Figure 7: ACL Connectivity a3s18</figcaption><div class="graphic"><img alt="ACL Connectivity a3s18" src="images/s041885.gif" style=""/></div></figure><figure id="ex-mon-netw-8"><figcaption>Figure 8: ACL Connectivity a3s19</figcaption><div class="graphic"><img alt="ACL Connectivity a3s19" src="images/s041886.gif" style=""/></div></figure></li><li id="jd0e173" style="">Next, verify the routes on the control node for routing
instances <code class="inline" v-pre="">default-domain:demo:vn0:vn0</code> and <code class="inline" v-pre="">default-domain:demo:vn16:vn16</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-9">Figure 9</a> and <a href="debug-connectivity-vnc.html#ex-mon-netw-10">Figure 10</a>.<figure id="ex-mon-netw-9"><figcaption>Figure 9: Routes default-domain:demo:vn0:vn0</figcaption><div class="graphic"><img alt="Routes default-domain:demo:vn0:vn0" src="images/s041887.gif" style=""/></div></figure><figure id="ex-mon-netw-10"><figcaption>Figure 10: Routes default-domain:demo:vn16:vn16</figcaption><div class="graphic"><img alt="Routes default-domain:demo:vn16:vn16" src="images/s041888.gif" style=""/></div></figure></li><li id="jd0e194" style="">We can see that VRF <code class="inline" v-pre="">default-domain:demo:vn0:vn0</code> on Virtual Router <code class="inline" v-pre="">a3s18</code> has the appropriate
route and next hop to reach VRF <code class="inline" v-pre="">default-domain:demo:front-end</code> on Virtual Router <code class="inline" v-pre="">a3s19</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-11">Figure 11</a>.<figure id="ex-mon-netw-11"><figcaption>Figure 11: Verify Route and Next Hop a3s18</figcaption><div class="graphic"><img alt="Verify Route and Next Hop a3s18" src="images/s041889.gif" style=""/></div></figure></li><li id="jd0e215" style="">We can see that VRF <code class="inline" v-pre="">default-domain:demo:vn16:vn16 </code> on Virtual Router <code class="inline" v-pre="">a3s19</code> has the appropriate
route and next hop to reach VRF <code class="inline" v-pre="">default-domain:demo:vn0:vn0 </code> on Virtual Router <code class="inline" v-pre="">a3s18</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-12">Figure 12</a>.<figure id="ex-mon-netw-12"><figcaption>Figure 12: Verify Route and Next Hop a3s19</figcaption><div class="graphic"><img alt="Verify Route and Next Hop a3s19" src="images/s041890.gif" style=""/></div></figure></li><li id="jd0e236" style="">Finally, flows between instances (IPs <code class="inline" v-pre="">192.168.0.252</code> and <code class="inline" v-pre="">192.168.16.253</code>) can be verified on
Virtual Routers <code class="inline" v-pre="">a3s18</code> and <code class="inline" v-pre="">a3s19</code>. See <a href="debug-connectivity-vnc.html#ex-mon-netw-13">Figure 13</a> and <a href="debug-connectivity-vnc.html#ex-mon-netw-14">Figure 14</a>.<figure id="ex-mon-netw-13"><figcaption>Figure 13: Flows for a3s18</figcaption><div class="graphic"><img alt="Flows for a3s18" src="images/s041891.gif" style=""/></div></figure><figure id="ex-mon-netw-14"><figcaption>Figure 14: Flows for a3s19</figcaption><div class="graphic"><img alt="Flows for a3s19" src="images/s041892.gif" style=""/></div></figure></li></ol><sw-prev-next> </sw-prev-next></p>