<p id="topic-content"><h1 id="jd0e2">Upgrading Contrail Networking using In-Place Upgrade Procedure</h1><sw-topic-details date="2020-06-01"> </sw-topic-details><sw-admonition name="note" style=""><strong class="title">Note</strong><p>This procedure can be used for Contrail Networking upgrades
to Contrail Networking Release 2003 or earlier only.</p><p>If you are upgrading to Contrail Networking Release 2005 or
later using an in-place upgrade procedure, see <a href="../installation/installing-contrail-ansible-ziu.html">How to Perform a Zero Impact Contrail Networking Upgrade using Ansible</a>.</p></sw-admonition><p>This document provides steps to upgrade Contrail
Networking using in-place upgrade procedure.</p><p>The procedure supports incremental model and you can use it
to upgrade from Contrail Networking Release <var v-pre="">N-1</var> to <var v-pre="">N</var>.</p><sw-admonition name="best-practice" style=""><strong class="title">Best Practice</strong><p>You must take snapshots of your current system
before proceeding with the upgrade process.</p></sw-admonition><p>For a list of supported platforms for all Contrail Networking
releases, see <a href="https://www.juniper.net/documentation/en_US/release-independent/contrail/topics/reference/contrail-supported-platforms.pdf">Contrail Networking Supported Platforms List</a> <sw-icon iconsize="18" name="pdf"> </sw-icon>.</p><ol type="1"><li id="jd0e36" style="">Update kernel version on all the compute nodes.<p><code class="inline" v-pre="">yum -y update kernel*</code></p><sw-admonition name="note" style=""><strong class="title">Note</strong><p>You must not update kernel version if you are upgrading
from Contrail Networking Release 1910 to Release 1911.</p></sw-admonition></li><li id="jd0e45" style="">Update <var v-pre="">CONTRAIL_VERSION</var> and <var v-pre="">CONTRAIL_CONTAINER_TAG</var> to the desired version tag in this <code class="filepath">instances.yml</code> file.<p>Access <var v-pre="">CONTRAIL_CONTAINER_TAG</var> located at <a href="https://www.juniper.net/documentation/en_US/contrail20/information-products/topic-collections/release-notes/readme-contrail-20.pdf">README Access to Contrail Networking Registry 20xx</a> <sw-icon iconsize="18" name="pdf"> </sw-icon>.</p></li><li id="jd0e65" style="">Run the following commands from <code class="filepath">contrail-ansible-deployer</code> directory.<p>For Contrail with OpenStack deployment:</p><p><code class="inline" v-pre="">cd contrail-ansible-deployer</code><br/><code class="inline" v-pre="">ansible-playbook -i inventory/ -e orchestrator=openstack
playbooks/configure_instances.yml</code><br/><code class="inline" v-pre="">ansible-playbook -e orchestrator=openstack -i inventory/ playbooks/install_contrail.yml</code></p></li><li id="jd0e82" style="">Reboot the compute node.</li><li id="jd0e85" style="">Check the status of Contrail service on the compute node.<p>All services must be <var v-pre="">active</var> .</p><p><code class="inline" v-pre="">sudo contrail-status</code></p></li></ol><p>The ansible playbook logs are available on the terminal during
execution. You can also access it at <code class="inline" v-pre="">/var/log/ansible.log</code>.</p><sw-prev-next> </sw-prev-next></p>